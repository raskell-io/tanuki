{% extends "base.html" %}

{% block title %}{{ page.title }}{% endblock %}

{% block body_class %}page-{{ page.slug }}{% endblock %}

{% set mode = config.extra.mode | default(value="site") %}

{% block sidebar %}
{% if mode == "docs" %}
{% include "partials/sidebar.html" %}
{% endif %}
{% endblock %}

{% block nav_buttons %}
{% if mode == "docs" or mode == "book" %}
{% include "partials/nav-buttons.html" %}
{% endif %}
{% endblock %}

{% block content %}
<article class="article">
    {% if mode == "site" or mode == "blog" %}
    <header class="article__header">
        <h1>{{ page.title }}</h1>

        {% if page.description %}
        <p class="article__description">{{ page.description }}</p>
        {% endif %}

        <div class="article__meta">
            {% if page.date %}
            <time datetime="{{ page.date }}">{{ page.date | date(format="%B %d, %Y") }}</time>
            {% endif %}

            {% if page.reading_time %}
            <span>&middot;</span>
            <span>{{ page.reading_time }} min read</span>
            {% endif %}

            {% if page.taxonomies.tags %}
            <span>&middot;</span>
            {% for tag in page.taxonomies.tags %}
            <a href="{{ get_taxonomy_url(kind='tags', name=tag) | safe }}" class="tag">{{ tag }}</a>
            {% endfor %}
            {% endif %}
        </div>
    </header>
    {% endif %}

    <div class="article__content">
        {{ page.content | safe }}
    </div>

    {% if page.taxonomies.tags and (mode == "site" or mode == "blog") %}
    <footer class="article__footer">
        <div class="article__tags">
            {% for tag in page.taxonomies.tags %}
            <a href="{{ get_taxonomy_url(kind='tags', name=tag) | safe }}" class="tag">{{ tag }}</a>
            {% endfor %}
        </div>
    </footer>
    {% endif %}
</article>

{# Bottom navigation for docs/book #}
{% if mode == "docs" or mode == "book" %}
<nav class="page-nav" aria-label="Page navigation">
    {% if page.earlier %}
    <a href="{{ page.earlier.permalink | safe }}" class="page-nav__link page-nav__link--prev">
        <span class="page-nav__label">Previous</span>
        <span class="page-nav__title">{{ page.earlier.title }}</span>
    </a>
    {% endif %}

    {% if page.later %}
    <a href="{{ page.later.permalink | safe }}" class="page-nav__link page-nav__link--next">
        <span class="page-nav__label">Next</span>
        <span class="page-nav__title">{{ page.later.title }}</span>
    </a>
    {% endif %}
</nav>
{% endif %}
{% endblock %}
