{# Previous/Next Navigation Buttons #}
{% if page %}
{# Determine prev/next based on sorting: weight-sorted uses lower/higher, date-sorted uses earlier/later #}
{# Skip pages with hide_from_nav set #}
{% if page.lower and (page.lower.extra.hide_from_nav is not defined or not page.lower.extra.hide_from_nav) %}
    {% set prev_page = page.lower %}
{% elif page.earlier and (page.earlier.extra.hide_from_nav is not defined or not page.earlier.extra.hide_from_nav) %}
    {% set prev_page = page.earlier %}
{% endif %}
{% if page.higher and (page.higher.extra.hide_from_nav is not defined or not page.higher.extra.hide_from_nav) %}
    {% set next_page = page.higher %}
{% elif page.later and (page.later.extra.hide_from_nav is not defined or not page.later.extra.hide_from_nav) %}
    {% set next_page = page.later %}
{% endif %}

<nav class="nav-buttons" aria-label="Page navigation">
    {# Previous button #}
    {% if prev_page %}
    <a href="{{ prev_page.permalink | safe }}" class="nav-button nav-button--prev" aria-label="Previous: {{ prev_page.title }}">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m15 18-6-6 6-6"/>
        </svg>
        <span class="nav-button__label">
            {{ prev_page.title | truncate(length=30) }}
            <span class="nav-button__shortcut">←</span>
        </span>
    </a>
    {% else %}
    <div class="nav-button nav-button--prev disabled" aria-hidden="true">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m15 18-6-6 6-6"/>
        </svg>
    </div>
    {% endif %}

    {# Next button #}
    {% if next_page %}
    <a href="{{ next_page.permalink | safe }}" class="nav-button nav-button--next" aria-label="Next: {{ next_page.title }}">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m9 18 6-6-6-6"/>
        </svg>
        <span class="nav-button__label">
            {{ next_page.title | truncate(length=30) }}
            <span class="nav-button__shortcut">→</span>
        </span>
    </a>
    {% else %}
    <div class="nav-button nav-button--next disabled" aria-hidden="true">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m9 18 6-6-6-6"/>
        </svg>
    </div>
    {% endif %}
</nav>
{% endif %}
